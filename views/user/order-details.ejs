<%- include('../layouts/homeheader.ejs') %>
<!-- ***** Main Banner Area Start ***** -->
<div class="" id="top">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="inner-content">
                    <h2></h2>
                    
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ***** Main Banner Area End ***** -->
<div class="fluid-container mt-5 col-md-12">
  <h1></h1>
  <div class="table-responsive text-nowrap mt-5 container">
    <table class="table table-bordered mt-5">
      <thead>
        <tr>
          <th>Order Id</th>
          <th>Payment Method</th>
          <th>Date</th>
          <th>Total Price</th>
          <th>Order Status</th>
          <th>Action</th>
          <!-- <th>Status</th> -->
          
          
          <!-- <th>Action</th> -->
        </tr>
      </thead>
      <tbody class="table-border-bottom-0">
        <% orderData.forEach((order)=>{ %>
          <tr>
            <td>
             <%= order._id %>
            </td>
            <td>
              <%= order.payment %>
            </td>
            <td>
              <%= order.date.toISOString().slice(0,10) %>
            </td>
            <td>
             <%= order.totalPrice %>
            </td>
            <td>
              <%= order.status %>
            </td>
            <td>
              <% if(order.status !=='canceled'){%>
                <a  class="btn btn-dark" onclick="cancelOrder('<%=order._id%>')">cancel</a>
              <%}else{%>
                <span class="btn btn-danger">cancelled</span>
              <%} %>
              
            </td>
            
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>

function cancelOrder(orderId1){
  console.log('ugyuguyg')
  const orderId = orderId1
  Swal.fire({
  title: 'Are you sure?',
  text: "You won't be able to revert this!",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, delete it!'
}).then((result) => {
  if (result.isConfirmed) {
   location.href = '/cancelOrder/?id='+ orderId
  }
})

}
</script>

<%- include('../layouts/homefooter.ejs') %>