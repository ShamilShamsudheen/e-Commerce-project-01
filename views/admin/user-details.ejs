<%- include('../layouts/adminheader.ejs') %>
  <div class="fluid-container">
    
    <div class="table-responsive text-nowrap mt-5 container">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>S/N</th>
            <th>Name</th>
            <th>Email</th>
            <th>Mobile No.</th>
            <th>Status</th>
            <!-- <th>Action</th> -->
          </tr>
        </thead>
        <tbody class="table-border-bottom-0">
          <% users.forEach((user,index)=> {%>
            <tr>
                <td><%= index+1 %></td>
              <td>
                <%= user.name %>
              </td>
              <td>
                <%= user.email %>
              </td>
              <td>
                <%= user.mobile %>
              </td>
              <td>
                <% if(user.status==true){%>
                <a  onclick="blockUser('<%= user._id %>')" class="btn btn-danger text-white" >Block</a>
                <% }else{ %>
                    <a href="/admin/unblockUser?id=<%= user._id %>" class="btn btn-success">Unblock</a>
                    <% } %>
              </td>
             
            </tr>
        </tbody>
        <% }) %>
      </table>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>

        function blockUser(userId1){
          console.log('ugyuguyg')
          const userId = userId1
          Swal.fire({
          title: 'Are you sure?',
          text: "You won't be able to revert this!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
          if (result.isConfirmed) {
            
           location.href = '/admin/blockUser?id='+ userId
          }
        })
        
        }
        </script>

  <%- include('../layouts/adminfooter.ejs') %>